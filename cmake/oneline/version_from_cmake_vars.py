import sys; import re; cmake_filename = sys.argv[1]; cmake_file = open(cmake_filename, 'r'); vars = dict(list(map(lambda varline: (re.search(r'(set\s\()([^\s]+)\s([^)]+)', varline).group(2), re.search(r'(set\s\()([^\s]+)\s([^)]+)', varline).group(3)), filter(lambda line: line.startswith('set ('), cmake_file.read().split('\n'))))); cmake_package = list(filter(lambda var: var.endswith('_VERSION_MAJOR'), vars.keys()))[0].split('_')[0]; version_major = vars[f'{cmake_package}_VERSION_MAJOR']; version_minor = vars[f'{cmake_package}_VERSION_MINOR']; version_patch = vars[f'{cmake_package}_VERSION_PATCH']; print(f'{version_major}.{version_minor}.{version_patch}')
